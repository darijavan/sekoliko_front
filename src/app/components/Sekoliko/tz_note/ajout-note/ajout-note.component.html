<mat-toolbar class="view gradient-card-header blue darken-2" style="padding:3%!important" color="primary">
  <span>
    Gestion des notes de {{names}} inscription: {{idInscription}}
  </span>
  <span fxFlex></span>
  <button (click)="retour()" class="tz-btn-circle m-1 rounded-circle relative waves-light text-center"
          style="background: #a6c!important;color: aliceblue;" color="secondary" routerLinkActive="active-link"
          type="button" mdbBtn
          mdbWavesEffect>
    <i class="fa fa-plus-circle"></i>
    Retour à la liste
  </button>
</mat-toolbar>
<mat-card>
  <form #noteForm="ngForm">
    <div class="row">
      <mat-form-field class="col-md-6">
        <mat-select name="matiere" placeholder="Matiere" name="type" [(ngModel)]="paramNote.idmat" #matiere="ngModel"
                    (selectionChange) = "checkIfUpdate($event.value)" required>
          <mat-option value="">Choisissez la matiere</mat-option>
          <mat-option *ngFor="let listMatiere of listMatier" [value]="listMatiere.id"> {{listMatiere.description}}
            Coefficient: {{listMatiere.coefficient}}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field class="col-md-6">
        <input matInput type="number" placeholder="Note" name="note" [(ngModel)]="paramNote.note" required
               #note="ngModel">
      </mat-form-field>
      <div class="right">
        <button mat-raised-button (click)="showDetail()">
          Voir de tails
        </button>
        <button mat-raised-button class="right" (click)="addNote(paramNote)" color="accent"
                [disabled]="!noteForm.form.valid">
          Ajouter
        </button>
      </div>
    </div>
  </form>
</mat-card>
<div *ngIf="details">
  <mat-card>
    <table mat-table [dataSource]="dataSource" matSort class="full" id="etudiantListe">
      <ng-container matColumnDef="num_inscription">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Classe </th>
        <td mat-cell *matCellDef="let _etudiant"> {{_etudiant.description }} </td>
      </ng-container>
      <ng-container matColumnDef="note">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Note </th>
        <td mat-cell *matCellDef="let _etudiant"> {{_etudiant.note }} </td>
      </ng-container>
      <ng-container matColumnDef="coefficient">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Coefficient </th>
        <td mat-cell *matCellDef="let _etudiant"> {{_etudiant.coefficient}} </td>
      </ng-container>
      <ng-container matColumnDef="classe">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Matière </th>
        <td mat-cell *matCellDef="let _etudiant"> {{_etudiant.nomMatiere}} </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </mat-card>
</div>
<div class="maskSpinner" *ngIf="loading">
  <app-radar-spinner
    [animationDuration]="4000"
    [size]="200"
    [color]="'#2e6bb1'"
  ></app-radar-spinner>
</div>
